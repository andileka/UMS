{"ast":null,"code":"import axios from \"axios\";\nimport { omitBy, isNil } from \"lodash\";\nimport { USERS_URL, USER_URL } from \"../config/constants\";\nexport const fetchUsers = async (params = {}) => {\n  try {\n    params = omitBy(params, isNil);\n    const query = Object.keys(params).map(k => encodeURIComponent(k) + \"=\" + encodeURIComponent(params[k])).join(\"&\");\n    const response = await axios.get(`${USERS_URL}?${query}`, authHeader());\n    refreshToken();\n    return response.data;\n  } catch (e) {\n    if (e.response && e.response.status === 401) {\n      logout();\n    }\n\n    const message = e.response ? e.response.data.message : e.message;\n    throw new Error(message);\n  }\n};\nexport const fetchUser = async userId => {\n  try {\n    const response = await axios.get(`${USERS_URL}/${userId}`, authHeader());\n    refreshToken();\n    return response.data;\n  } catch (e) {\n    if (e.response && e.response.status === 401) {\n      logout();\n    }\n\n    const message = e.response ? e.response.data.message : e.message;\n    throw new Error(message);\n  }\n};\nexport const createUser = async data => {\n  try {\n    const response = await axios.post(USERS_URL, data, authHeader());\n    refreshToken();\n    return response.data;\n  } catch (e) {\n    if (e.response && e.response.status === 401) {\n      logout();\n    }\n\n    const message = e.response ? e.response.data.message : e.message;\n    throw new Error(message);\n  }\n};\nexport const updateUser = async (userId, data) => {\n  try {\n    const response = await axios.patch(`${USERS_URL}/${userId}`, data, authHeader());\n    refreshToken();\n    return response.data;\n  } catch (e) {\n    if (e.response && e.response.status === 401) {\n      logout();\n    }\n\n    const message = e.response ? e.response.data.message : e.message;\n    throw new Error(message);\n  }\n};\nexport const deleteUser = async userId => {\n  try {\n    const response = await axios.delete(`${USERS_URL}/${userId}`, authHeader());\n    refreshToken();\n    return response.data;\n  } catch (e) {\n    if (e.response && e.response.status === 401) {\n      logout();\n    }\n\n    const message = e.response ? e.response.data.message : e.message;\n    throw new Error(message);\n  }\n};\nexport const updateProfile = async data => {\n  try {\n    const response = await axios.patch(USER_URL, data, authHeader());\n    refreshToken();\n    return response.data;\n  } catch (e) {\n    if (e.response && e.response.status === 401) {\n      logout();\n    }\n\n    const message = e.response ? e.response.data.message : e.message;\n    throw new Error(message);\n  }\n};","map":{"version":3,"sources":["C:/Users/User/Desktop/UserManagemenSystem/frontend/ums/src/services/user.js"],"names":["axios","omitBy","isNil","USERS_URL","USER_URL","fetchUsers","params","query","Object","keys","map","k","encodeURIComponent","join","response","get","authHeader","refreshToken","data","e","status","logout","message","Error","fetchUser","userId","createUser","post","updateUser","patch","deleteUser","delete","updateProfile"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { omitBy, isNil } from \"lodash\";\r\nimport { USERS_URL, USER_URL } from \"../config/constants\";\r\n\r\nexport const fetchUsers = async (params = {}) => {\r\n  try {\r\n    params = omitBy(params, isNil);\r\n    const query = Object.keys(params)\r\n      .map((k) => encodeURIComponent(k) + \"=\" + encodeURIComponent(params[k]))\r\n      .join(\"&\");\r\n    const response = await axios.get(`${USERS_URL}?${query}`, authHeader());\r\n    refreshToken();\r\n    return response.data;\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 401) {\r\n      logout();\r\n    }\r\n    const message = e.response ? e.response.data.message : e.message;\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\nexport const fetchUser = async (userId) => {\r\n  try {\r\n    const response = await axios.get(`${USERS_URL}/${userId}`, authHeader());\r\n    refreshToken();\r\n    return response.data;\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 401) {\r\n      logout();\r\n    }\r\n    const message = e.response ? e.response.data.message : e.message;\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\nexport const createUser = async (data) => {\r\n  try {\r\n    const response = await axios.post(USERS_URL, data, authHeader());\r\n    refreshToken();\r\n    return response.data;\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 401) {\r\n      logout();\r\n    }\r\n    const message = e.response ? e.response.data.message : e.message;\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\nexport const updateUser = async (userId, data) => {\r\n  try {\r\n    const response = await axios.patch(\r\n      `${USERS_URL}/${userId}`,\r\n      data,\r\n      authHeader()\r\n    );\r\n    refreshToken();\r\n    return response.data;\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 401) {\r\n      logout();\r\n    }\r\n    const message = e.response ? e.response.data.message : e.message;\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\nexport const deleteUser = async (userId) => {\r\n  try {\r\n    const response = await axios.delete(`${USERS_URL}/${userId}`, authHeader());\r\n    refreshToken();\r\n    return response.data;\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 401) {\r\n      logout();\r\n    }\r\n    const message = e.response ? e.response.data.message : e.message;\r\n    throw new Error(message);\r\n  }\r\n};\r\n\r\nexport const updateProfile = async (data) => {\r\n  try {\r\n    const response = await axios.patch(USER_URL, data, authHeader());\r\n    refreshToken();\r\n    return response.data;\r\n  } catch (e) {\r\n    if (e.response && e.response.status === 401) {\r\n      logout();\r\n    }\r\n    const message = e.response ? e.response.data.message : e.message;\r\n    throw new Error(message);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}